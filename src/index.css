@tailwind base;
@tailwind components;
@tailwind utilities;

/* Hide style panel when no selection (controled by .hide-style-panel class on container) */
.hide-style-panel:not(.annotation-mode) .tlui-style-panel {
  display: none !important;
  opacity: 0 !important;
  pointer-events: none !important;
}

/* Allow device shapes to show shadows outside bounds */
.tl-shape[data-shape-type="device"] {
  overflow: visible !important;
  clip-path: none !important;
}

.tl-shape[data-shape-type="device"]>*>* {
  overflow: visible !important;
}

.unselectable {
  user-select: none;
  -webkit-user-select: none;
}

/* Screenshot Utilities - Only hide UI chrome, not device content */
body.screenshot-mode .device-header,
body.screenshot-mode .global-controls,
body.screenshot-mode .tlui-layout,
body.screenshot-mode .tlui-toolbar,
body.screenshot-mode .tlui-style-panel,
body.screenshot-mode .tlui-debug-panel,
body.screenshot-mode .tlui-menu,
body.screenshot-mode .tlui-context-menu,
body.screenshot-mode .tlui-toast-container,
body.screenshot-mode .tl-watermark_SEE-LICENSE,
body.screenshot-mode [data-testid="tl-watermark-unlicensed"],
body.screenshot-mode .floating-ui-layer,
body.screenshot-mode .vertical-toolbar,
body.screenshot-mode .contextual-toolbar,
body.screenshot-mode .focus-overlay {
  visibility: hidden !important;
  opacity: 0 !important;
  pointer-events: none !important;
}

/* Remove decorative frame styling for clean screenshots */
body.screenshot-mode .device-frame {
  border: none !important;
  box-shadow: none !important;
  border-radius: 0 !important;
}

/* Background Patterns */
.bg-pattern-dots {
  background-image: radial-gradient(currentColor 1px, transparent 1px);
  background-size: 20px 20px;
}

.bg-pattern-grid {
  background-image: linear-gradient(currentColor 1px, transparent 1px),
    linear-gradient(90deg, currentColor 1px, transparent 1px);
  background-size: 20px 20px;
}

.bg-pattern-lines {
  background-image: repeating-linear-gradient(45deg, currentColor 0, currentColor 1px, transparent 0, transparent 50%);
  background-size: 10px 10px;
  opacity: 0.05;
}

/* Scrollbar Hiding */
.hidden-scrollbar::-webkit-scrollbar {
  display: none;
}

.hidden-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

html,
body,
#root {
  height: 100%;
  margin: 0;
  overflow: hidden;
  background-color: #0f172a;
  /* slate-900 */
  color: white;
}

/* TLDraw Customizations */
.tl-frame-heading {
  display: none !important;
}

.tl-frame__body {
  stroke: transparent !important;
  fill: transparent !important;
}

/* 
 * CRITICAL: Viewport frames (annotation mode) must not block device selection
 * When annotation mode is active, frames are created as children of devices.
 * We need to ensure:
 * 1. The frame itself doesn't intercept pointer events meant for the device
 * 2. Annotations inside the frame CAN receive pointer events
 * 3. The device's click shield works correctly
 */

/* Frame containers should pass clicks through to parent device */
.tl-shape[data-shape-type="frame"] {
  pointer-events: none !important;
}

/* Frame children (annotations) should receive clicks */
.tl-shape[data-shape-type="frame"] .tl-shape {
  pointer-events: auto !important;
}

/* Annotation containers specifically pass clicks through */
.tl-shape[data-shape-type="annotation-container"] {
  pointer-events: none !important;
}

/* Z-Index Fixes */
.tlui-layout {
  z-index: 10000 !important;
}

.tl-ui-layer {
  z-index: 10000 !important;
}

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Hide style panel when no selection (controled by .hide-style-panel class on container) */
.hide-style-panel:not(.annotation-mode) .tlui-style-panel {
  display: none !important;
  opacity: 0 !important;
  pointer-events: none !important;
}

/* Allow device shapes to show shadows outside bounds */
.tl-shape[data-shape-type="device"] {
  overflow: visible !important;
  clip-path: none !important;
}

.tl-shape[data-shape-type="device"]>*>* {
  overflow: visible !important;
}

.unselectable {
  user-select: none;
  -webkit-user-select: none;
}

/* Screenshot Utilities - Only hide UI chrome, not device content */
body.screenshot-mode .device-header,
body.screenshot-mode .global-controls,
body.screenshot-mode .tlui-layout,
body.screenshot-mode .tlui-toolbar,
body.screenshot-mode .tlui-style-panel,
body.screenshot-mode .tlui-debug-panel,
body.screenshot-mode .tlui-menu,
body.screenshot-mode .tlui-context-menu,
body.screenshot-mode .tlui-toast-container,
body.screenshot-mode .tl-watermark_SEE-LICENSE,
body.screenshot-mode [data-testid="tl-watermark-unlicensed"],
body.screenshot-mode .floating-ui-layer,
body.screenshot-mode .vertical-toolbar,
body.screenshot-mode .contextual-toolbar,
body.screenshot-mode .focus-overlay {
  visibility: hidden !important;
  opacity: 0 !important;
  pointer-events: none !important;
}

/* Remove decorative frame styling for clean screenshots */
body.screenshot-mode .device-frame {
  border: none !important;
  box-shadow: none !important;
  border-radius: 0 !important;
}

/* Background Patterns */
.bg-pattern-dots {
  background-image: radial-gradient(currentColor 1px, transparent 1px);
  background-size: 20px 20px;
}

.bg-pattern-grid {
  background-image: linear-gradient(currentColor 1px, transparent 1px),
    linear-gradient(90deg, currentColor 1px, transparent 1px);
  background-size: 20px 20px;
}

.bg-pattern-lines {
  background-image: repeating-linear-gradient(45deg, currentColor 0, currentColor 1px, transparent 0, transparent 50%);
  background-size: 10px 10px;
  opacity: 0.05;
}

/* Scrollbar Hiding */
.hidden-scrollbar::-webkit-scrollbar {
  display: none;
}

.hidden-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

html,
body,
#root {
  height: 100%;
  margin: 0;
  overflow: hidden;
  background-color: #0f172a;
  /* slate-900 */
  color: white;
}

/* TLDraw Customizations */
.tl-frame-heading {
  display: none !important;
}

.tl-frame__body {
  stroke: transparent !important;
  fill: transparent !important;
}

/* Ensure frame SVG doesn't intercept clicks - let them pass to device underneath */
.tl-shape[data-shape-type="frame"] .tl-svg-container {
  pointer-events: none !important;
}

/* But allow interactions on annotation shapes inside frames */
.tl-shape[data-shape-type="frame"] .tl-shape {
  pointer-events: auto !important;
}

/* Ensure device click shield is always clickable */
.tl-shape[data-shape-type="device"] .device-frame .absolute.inset-0.z-50 {
  pointer-events: all !important;
}

/* Annotation containers should never block clicks on underlying devices */
.tl-shape[data-shape-type="annotation-container"] {
  pointer-events: none !important;
}

/* Ensure annotation containers don't create a stacking context that blocks clicks */
.tl-shape[data-shape-type="annotation-container"][style*="opacity: 0"] {
  display: none !important;
}

/* 
 * Frame and annotation container pointer-events are handled by:
 * 1. Soft Lock Listener in TldrawApp.tsx - redirects frame selection to device
 * 2. TLDraw's internal hit testing system
 * 
 * Note: CSS pointer-events affects DOM events but TLDraw uses spatial index
 * for shape selection. The soft lock listener handles redirecting frame
 * selections to the parent device.
 */

/* Z-Index Fixes */
.tlui-layout {
  z-index: 10000 !important;
}

.tl-ui-layer {
  z-index: 10000 !important;
}
